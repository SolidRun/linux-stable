// SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
/*
 * Device Tree Source for the RZ/G2L SolidRun Tutus Board
 *
 * Copyright (C) 2021 Renesas Electronics Corp.
 */

#include <dt-bindings/gpio/gpio.h>
#include <dt-bindings/pinctrl/rzg2l-pinctrl.h>
#include <dt-bindings/input/input.h>

/*
 * DIP-Switch S3 setting on SoM
 * 1 : High; 0: Low
 * S3[1] : SW_SD0_DEV_SEL	(1: eMMC; 0: uSD)
 */

#define SW_SD0_DEV_SEL	1

/dts-v1/;
#include "rzg2l-sr-som.dtsi"

/ {
	model = "Solidrun RZ/G2L HummingBoard-Tutus";
	compatible = "renesas,rzg2l-sr-som","renesas,r9a07g044l2", "renesas,r9a07g044";

	x1_clk: x1-clock {
		compatible = "fixed-clock";
		#clock-cells = <0>;
		clock-frequency = <24000000>;
	};

	leds {
		compatible = "gpio-leds";

		LED-R-hog {
			label = "LED_R";
			gpios = <&pinctrl RZG2L_GPIO(17, 0) GPIO_ACTIVE_HIGH>;
			default-state = "on";      
		};

		LED-G-hog {
			label = "LED_G";
			gpios = <&pinctrl RZG2L_GPIO(17, 1) GPIO_ACTIVE_HIGH>;
			default-state = "off";
		};

		LED-B-hog {
			label = "LED_B";
			gpios = <&pinctrl RZG2L_GPIO(17, 2) GPIO_ACTIVE_HIGH>;
			default-state = "off";
		};
	};

	/*poll RZ_P16_0 (SW1 Button) and reboot if the button is pressed*/
	gpio_keys_polled {
		compatible = "gpio-keys-polled";
		#address-cells = <1>;
		#size-cells = <0>;
		poll-interval = <1000>; /*1 sec*/
		autorepeat; /*for cases when key was triggered before daemon was started*/
		button@0 {
			label = "reset";
			linux,code = <KEY_RESTART>;
			gpios = <&pinctrl RZG2L_GPIO(16, 0) GPIO_ACTIVE_LOW>;
			debounce-interval = <100>;
		};
	};

        usb0_vbus_otg: regulator-usb0-vbus-otg {
                compatible = "regulator-fixed";
                regulator-name = "USB0_VBUS_OTG";
                regulator-min-microvolt = <5000000>;
                regulator-max-microvolt = <5000000>;
                gpio = <&pinctrl RZG2L_GPIO(4, 0) GPIO_ACTIVE_HIGH>;
                gpio-open-drain;
                regulator-always-on;
                enable-active-high;
        };

        usb1_vbus: regulator-usb1-vbus {
                compatible = "regulator-fixed";
                regulator-name = "USB1_VBUS";
                regulator-min-microvolt = <5000000>;
                regulator-max-microvolt = <5000000>;
                gpio = <&pinctrl RZG2L_GPIO(42, 0) GPIO_ACTIVE_HIGH>;
                gpio-open-drain;
                regulator-always-on;
                enable-active-high;
        };
};

&pinctrl {
	gpio-sd0-pwr-en-hog {
		gpio-hog;
		gpios = <RZG2L_GPIO(4, 1) GPIO_ACTIVE_HIGH>;
		output-high;
		line-name = "gpio_sd0_pwr_en";
	};
};

&i2c0 {
	rtc@69 {
		compatible = "abracon,abx80x";
		reg = <0x69>;
		abracon,tc-diode = "schottky";
		abracon,tc-resistor = <3>;
	};
};

&scif1 {
	pinctrl-0 = <&scif1_pins>;
	pinctrl-names = "default";
	status = "okay";
};

&canfd {
	/delete-property/ pinctrl-0;
	/delete-property/ pinctrl-names;
	status = "disabled";
};

&spi1 {
	/delete-property/ pinctrl-0;
	/delete-property/ pinctrl-names;
	status = "disabled";
};
