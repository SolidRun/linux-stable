// SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
/*
 * Device Tree Source for the RZ/V2L Solidrun SOM
 *
 * Copyright (C) 2023 SolidRun Ltd.
 */

/dts-v1/;

/* RZ/V2L R9A07G054L2 SoC */
#include "r9a07g054l2.dtsi"
#include "rz_2l-sr-som-common.dtsi"


/ {
	memory@48000000 {
		device_type = "memory";
		/* first 128MB is reserved for secure area. */
		reg = <0x0 0x48000000 0x0 0x78000000>; /*2GB*/
	};

	reserved-memory {
		#address-cells = <2>;
		#size-cells = <2>;
		ranges;

                multimedia_cma: linux,multimedia {
                        compatible = "shared-dma-pool";
                        reusable;
                        size = <0x0 0x10000000>;
                };

                mmp_reserved: linux,mmp {
                        compatible = "shared-dma-pool";
                        reusable;
                        reg = <0x00000000 0x68000000 0x0 0x8000000>;
                };

		/* device specific region for contiguous allocations */
		drp_reserved: DRP-AI {
				reusable;
				reg = <0x0 0x80000000 0x0 0x05000000>;
		};

		image_buf0: image_buf@0 {
				compatible = "shared-dma-pool";
				reusable;
				reg = <0x0 0xB0000000 0x0 0x04000000>;
				label = "image_buf0";
		};

		isp_work0: SIMPLE_ISP {
				reusable;
				reg = <0x0 0xB4000000 0x0 0x03000000>;
		};
	};

	udmabuf@0 {
		compatible = "ikwzm,u-dma-buf";
		device-name = "udmabuf0";
		minor-number = <0>;
		size = <0x4000000>; // 64mib
		dma-coherent;
		memory-region = <&image_buf0>;
	};
};

&drpai0 {
	memory-region = <&drp_reserved>;
	linux-memory-region = < &{/memory@48000000} >;
	status = "okay"; 
};

